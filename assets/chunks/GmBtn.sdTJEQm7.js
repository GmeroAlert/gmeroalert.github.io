var I=Object.defineProperty;var L=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var g=(e,t,n)=>(L(e,typeof t!="symbol"?t+"":t,n),n);import{d as H,o as T,c as j,r as A,_ as S}from"./framework.oh-BXy59.js";function v(e,t){const n=s=>{t(s.animationName)};e.addEventListener("animationend",n)}function d(e,t){e.style.animationName=t}function o(e){return`gmal-${e}`}function a(...e){const t=document.createElement("div");return t.classList.add(...e),t}function B(e,t){const n=o("count");let s=e.querySelector(`.${n}`);s||(s=document.createElement("span"),s.classList.add(n),e.append(s)),s.innerHTML=`${t>99?"99":t}`,d(s,""),setTimeout(()=>{d(s,o("shake"))})}const p=()=>{let e=document.querySelector(".gmal-box");return e||(e=a(o("box")),document.body.append(e)),e},G=()=>{let e=document.querySelector(`.${o("msg-box")}`);return e||(e=a(o("msg-box")),p().append(e),e)},q=()=>{let e=document.querySelector(`.${o("notice-box")}`);return e||(e=a(o("notice-box")),p().append(e),e)};function $(e,t){const n=e.style.cssText.split(";");n.pop(),e.style.cssText=`${n.concat(t).join(";")};`}const f='viewBox="0 0 24 24"',m='style="width:1em;height:1em;vertical-align:baseline"',C=`<svg class="${o("ani-turn")}" ${f} ${m}><path d="M1,12A11,11,0,0,0,12,23h0A11,11,0,0,0,12,1" style="fill:none;stroke:#1890ff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M18.5,12A6.5,6.5,0,1,0,12,18.5h0" style="fill:none;stroke:#1890ff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>`,E=[`<svg ${f} ${m}><circle cx="12" cy="12" r="12" style="fill:#29abe2"/><path d="M12,17.5a1,1,0,0,1-1-1v-5h-.5a1,1,0,0,1,0-2H12a1,1,0,0,1,1,1v6A1,1,0,0,1,12,17.5Z" style="fill:#fff"/><path d="M14,18.5H10a1,1,0,0,1,0-2h4a1,1,0,0,1,0,2Z" style="fill:#fff"/><circle cx="12" cy="6" r="1.5" style="fill:#fff"/></svg>`,`<svg ${f} ${m}><circle cx="12" cy="12" r="12" style="fill:#faad14"/><path d="M12,19.5A1.5,1.5,0,1,0,10.5,18,1.5,1.5,0,0,0,12,19.5Z" style="fill:#fff;fill-rule:evenodd"/><path d="M12,14a1.5,1.5,0,0,1-1.5-1.5v-7a1.5,1.5,0,0,1,3,0v7A1.5,1.5,0,0,1,12,14Z" style="fill:#fff"/></svg>`,`<svg ${f} ${m}><circle cx="12" cy="12" r="12" style="fill:#e06968"/><path d="M16,8,8,16" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M8,8l8,8" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>`,`<svg ${f} ${m}><path d="M12,.5l3.18,2.2h3.93l1.21,3.55,3.18,2.2L22.28,12l1.22,3.55-3.18,2.2L19.11,21.3H15.18L12,23.5,8.82,21.3H4.89L3.68,17.75.5,15.55,1.72,12,.5,8.45l3.18-2.2L4.89,2.7H8.82Z" style="fill:#52c41a;stroke:#52c41a;stroke-linecap:round;stroke-linejoin:round"/><path d="M7.5,12l3,3,6-6" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>`,C],P=["info","warning","error","success","loading"];function _(e,t=""){const n=P.indexOf(e),s=E[n]??"";return`<i class="${t}">${s}</i>`}function h(e,t,n){return`class="${o("aniicon")} ${o(t)} ${e?o("dense"):""} ${n}"`}function Z(e=!1,t=""){return`<div ${h(e,"success-icon",t)}><div class="${o("success-line")} ${o("line-tip")}"></div><div class="${o("success-line")} ${o("line-long")}"></div><div class="${o("success-ring")}"></div><div class="${o("success-fix")}"></div></div>`}function W(e=!1,t=""){return`<div ${h(e,"err-icon",t)}><div class="${o("err-r")}"><div class="${o("err-ll")}"></div><div class="${o("err-lr")}"></div></div></div>`}function z(e=!1,t=""){return`<div ${h(e,"warn-icon",t)}><div class="${o("warn-content")}">!</div></div>`}function O(e=!1,t=""){return`<div ${h(e,"info-icon",t)}><div class="${o("info-content")}">i</div></div>`}function D(e=!1,t=""){return`<div ${h(e,"load-icon",t)}>${C}</div>`}function w(e,t=!1,n=""){switch(e){case"success":return Z(t,n);case"error":return W(t,n);case"warning":return z(t,n);case"info":return O(t,n);case"loading":return D(t,n);default:return""}}class F{constructor(t,n){g(this,"timeout",2500);g(this,"maxCount",8);g(this,"activeInsts",new Map);this.type=n,this.core=t,n===1&&(this.timeout=0)}config(t){this.timeout=t.timeout||this.timeout,this.maxCount=t.maxCount||this.maxCount}fire(t){const n=this.mkMsg(t);return t.type!=="loading"&&this.sT(n,(t==null?void 0:t.timeout)||this.timeout),n}sT(t,n){if(!n)return;const{$el:s}=t;let c=t.progress;c??(c=this.mkP(t,n)),c.reset(),s.onmouseenter=c.pause,s.onmouseleave=c.resume}mkP(t,n){const{$el:s}=t,c=a(o("progress")),i=a(o("progress-bar"));c.append(i),s.append(c),i.ontransitionend=()=>{t.close(-1)};const r=()=>i.clientWidth/c.clientWidth,l=()=>{$(i,["transition:none",`width:${r()*100}%`])},u=()=>{$(i,["width:0",`transition:width ${n*r()}ms linear`])},b=()=>{$(i,["width:100%","transition:none"]),u()};return t.progress={pause:l,resume:u,reset:b}}mkMsg(t){var r;const n=`${t.content}${t.type}`;if(!this.type&&this.activeInsts.has(n)){const l=this.activeInsts.get(n);return l.count+=1,B(l.$el,l.count),l}const s={...t,onClosed:l=>{t!=null&&t.onClosed&&t.onClosed(l)},onClose:()=>{this.activeInsts.delete(n)}},c=this.core(s);if(this.type===1||this.activeInsts.size>=this.maxCount){const l=this.activeInsts.values().next().value;l&&((r=l.progress)==null||r.pause(),l.close(-2))}const i={...c,id:n,count:1};return this.activeInsts.set(n,i),c.open(),i}}function R(e){const t={content:"success",type:"success"};let n=!1;const s=c=>{switch(typeof c){case"string":n?t.type=c:(t.content=c,n=!0);break;case"object":Object.assign(t,c);break}};for(let c=0;c<3;c++){const i=e[c];i&&s(i)}return t}function y(e,t){const n=new F(e,t),s=(...c)=>n.fire(R(c));return s.config=n.config.bind(n),s}function M(e=""){return`<i class="${e}" style="cursor:pointer;transition:all 0.2s"><svg viewBox="0 0 24 24" width="1em" height="1em"><path d="M1.5,1.5l21,21" style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3px"/><path d="M1.5,22.5l21-21" style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3px"/></svg></i>`}function k(e,t){const n=document.createElement("button");return n.textContent=e,n.onclick=t,n.classList.add(o("alert-btn")),n}function J(e){const t=a(o("alert")),n=w(e.type,!1,o("alert-icon"));if(t.innerHTML=`${n}<div class="${o("alert-title")}">${e.content}</div>`,e.text||e.html){const r=a(o("alert-content"));e.html?typeof e.html=="string"?r.innerHTML=e.html:r.append(e.html):r.textContent=e.text||"hello",t.append(r)}const s=p(),c=()=>{s.append(t)},i=r=>(e.onClose(),d(t,o("alert-hide")),new Promise(l=>{v(t,u=>{u===o("alert-hide")&&(t.remove(),e.onClosed(r),l())})}));if(e.showCancel||e.showConfirm){const r=a(o("alert-btn-group"));e.showCancel&&r.append(k("取消",()=>{i(0)})),e.showConfirm&&r.append(k("确定",()=>{i(1)})),t.append(r)}if(!e.hideClose){const r=a();r.innerHTML=M(o("alert-close")),r.onclick=()=>{i(0)},t.append(r)}return{close:i,open:c,$el:t}}const Y=y(J,1);function K(e){const t=_(e.type,o("icon")),n=a(o("msg")),s=a(o("msg-main"));return n.append(s),s.innerHTML=`${t}<div class=${o("msg-content")}>${e.content}</div>`,{open:()=>{G().append(n),d(n,o("msg-movein"))},close:r=>(e.onClose(),s.style.maxHeight=`${s.offsetHeight}px`,d(n,o("msg-moveout")),d(s,o("msg-out")),new Promise(l=>{v(n,u=>{u===o("msg-moveout")&&(n.remove(),e.onClosed(r),l())})})),$el:n}}const ee=y(K,0);function N(e){const t=w(e.type,!0,o("notice-icon")),n=a(o("notice"));return n.innerHTML=`<div class="${o("notice-main")}">${t}  <div class="${o("notice-content")}">${e.content}</div></div>`,v(n,i=>{i===o("open")&&$(n,["opacity:1",`animation-name:${o("notice-movein")}`]),i===o("notice-moveout")&&d(n,o("close"))}),{open:()=>{q().prepend(n),$(n,[`max-height:${n.offsetHeight+10}px`]),d(n,o("open")),setTimeout(()=>{const i=n.querySelector(`.${o("notice-icon")}`);i&&(i.style.opacity="1")},400)},close:i=>(e.onClose(),new Promise(r=>{d(n,o("notice-moveout")),v(n,l=>{l===o("close")&&(n.remove(),e.onClosed(i),r())})})),$el:n}}const te=y(N,0),x={info:"#409eff",success:"#67c23a",warning:"#e6a23c",error:"#f56c6c"};function Q(e){const t=x[e.type]||x.info,n=a(o("info"));n.innerHTML=`<div class="${o("info-header")}"><div class="${o("info-status")}" style="background:${t};"></div><span style="margin-right:auto;font-weight:600">${e.headerLeft||"公告"}</span><span style="font-size:.875em;opacity:.7">${e.headerRight||""}</span>${e.hideClose?"":M(o("info-close"))}</div><div class="${o("info-content")}">${e.content}</div>`;const s=()=>{p().append(n)},c=i=>(e.onClose(),new Promise(r=>{d(n,o("info-move-out")),v(n,l=>{l===o("info-move-out")&&(n.remove(),e.onClosed(i),r())})}));if(!e.hideClose){const i=n.querySelector(`.${o("info-close")}`);i.onclick=()=>{c(0)}}return{open:s,close:c,$el:n}}const ne=y(Q,1),U=H({__name:"GmBtn",props:{onClick:{type:Function,default:()=>{}}},setup(e){return(t,n)=>(T(),j("button",{class:"btn",onClick:n[0]||(n[0]=(...s)=>e.onClick&&e.onClick(...s))},[A(t.$slots,"default",{},void 0,!0)]))}}),oe=S(U,[["__scopeId","data-v-675b03c0"]]);export{oe as G,Y as a,ne as i,ee as m,te as n};
