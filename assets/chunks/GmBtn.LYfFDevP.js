var b=Object.defineProperty;var I=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t,n)=>(I(e,typeof t!="symbol"?t+"":t,n),n);import{d as L,o as H,c as T,r as j,_ as A}from"./framework.1f85XjN3.js";function p(e,t){const n=s=>{t(s.animationName)};e.addEventListener("animationend",n)}function d(e,t){e.style.animationName=t}function o(e){return`gmal-${e}`}function a(...e){const t=document.createElement("div");return t.classList.add(...e),t}function S(e,t){const n=o("count");let s=e.querySelector(`.${n}`);s||(s=document.createElement("span"),s.classList.add(n),e.append(s)),s.innerHTML=`${t>99?"99":t}`,d(s,""),setTimeout(()=>{d(s,o("shake"))})}const g=()=>{let e=document.querySelector(".gmal-box");return e||(e=a(o("box")),document.body.append(e)),e},B=()=>{let e=document.querySelector(`.${o("msg-box")}`);return e||(e=a(o("msg-box")),g().append(e),e)},G=()=>{let e=document.querySelector(`.${o("notice-box")}`);return e||(e=a(o("notice-box")),g().append(e),e)};function h(e,t){const n=e.style.cssText.split(";");n.pop(),e.style.cssText=`${n.concat(t).join(";")};`}const f='viewBox="0 0 24 24"',$='style="width:1em;height:1em;vertical-align:baseline"',x=`<svg class="${o("ani-turn")}" ${f} ${$}><path d="M1,12A11,11,0,0,0,12,23h0A11,11,0,0,0,12,1" style="fill:none;stroke:#1890ff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M18.5,12A6.5,6.5,0,1,0,12,18.5h0" style="fill:none;stroke:#1890ff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>`,q=[`<svg ${f} ${$}><circle cx="12" cy="12" r="12" style="fill:#29abe2"/><path d="M12,17.5a1,1,0,0,1-1-1v-5h-.5a1,1,0,0,1,0-2H12a1,1,0,0,1,1,1v6A1,1,0,0,1,12,17.5Z" style="fill:#fff"/><path d="M14,18.5H10a1,1,0,0,1,0-2h4a1,1,0,0,1,0,2Z" style="fill:#fff"/><circle cx="12" cy="6" r="1.5" style="fill:#fff"/></svg>`,`<svg ${f} ${$}><circle cx="12" cy="12" r="12" style="fill:#faad14"/><path d="M12,19.5A1.5,1.5,0,1,0,10.5,18,1.5,1.5,0,0,0,12,19.5Z" style="fill:#fff;fill-rule:evenodd"/><path d="M12,14a1.5,1.5,0,0,1-1.5-1.5v-7a1.5,1.5,0,0,1,3,0v7A1.5,1.5,0,0,1,12,14Z" style="fill:#fff"/></svg>`,`<svg ${f} ${$}><circle cx="12" cy="12" r="12" style="fill:#e06968"/><path d="M16,8,8,16" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M8,8l8,8" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>`,`<svg ${f} ${$}><path d="M12,.5l3.18,2.2h3.93l1.21,3.55,3.18,2.2L22.28,12l1.22,3.55-3.18,2.2L19.11,21.3H15.18L12,23.5,8.82,21.3H4.89L3.68,17.75.5,15.55,1.72,12,.5,8.45l3.18-2.2L4.89,2.7H8.82Z" style="fill:#52c41a;stroke:#52c41a;stroke-linecap:round;stroke-linejoin:round"/><path d="M7.5,12l3,3,6-6" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></svg>`,x],E=["info","warn","error","success","loading"];function P(e,t=""){const n=E.indexOf(e),s=q[n]??"";return`<i class="${t}">${s}</i>`}function m(e,t,n){return`class="${o("aniicon")} ${o(t)} ${e?o("dense"):""} ${n}"`}function _(e=!1,t=""){return`<div ${m(e,"ok-icon",t)}><div class="${o("ok-line")} ${o("line-tip")}"></div><div class="${o("ok-line")} ${o("line-long")}"></div><div class="${o("ok-ring")}"></div><div class="${o("ok-fix")}"></div></div>`}function Z(e=!1,t=""){return`<div ${m(e,"err-icon",t)}><div class="${o("err-r")}"><div class="${o("err-ll")}"></div><div class="${o("err-lr")}"></div></div></div>`}function W(e=!1,t=""){return`<div ${m(e,"warn-icon",t)}><div class="${o("warn-content")}">!</div></div>`}function z(e=!1,t=""){return`<div ${m(e,"info-icon",t)}><div class="${o("info-content")}">i</div></div>`}function O(e=!1,t=""){return`<div ${m(e,"load-icon",t)}>${x}</div>`}function C(e,t=!1,n=""){switch(e){case"success":return _(t,n);case"error":return Z(t,n);case"warn":return W(t,n);case"info":return z(t,n);case"loading":return O(t,n);default:return""}}class D{constructor(t,n){v(this,"timeout",2500);v(this,"maxCount",8);v(this,"activeInsts",new Map);this.type=n,this.core=t,n===1&&(this.timeout=0)}config(t){this.timeout=t.timeout||this.timeout,this.maxCount=t.maxCount||this.maxCount}fire(t){const n=this.mkMsg(t);return t.type!=="loading"&&this.sT(n,(t==null?void 0:t.timeout)||this.timeout),n}sT(t,n){if(!n)return;const{$el:s}=t;let i=t.progress;i??(i=this.mkP(t,n)),i.reset(),s.onmouseenter=i.pause,s.onmouseleave=i.resume}mkP(t,n){const{$el:s}=t,i=a(o("progress")),r=a(o("progress-bar"));i.append(r),s.append(i),r.ontransitionend=()=>{t.close(-1)};const c=()=>r.clientWidth/i.clientWidth,l=()=>{h(r,["transition:none",`width:${c()*100}%`])},u=()=>{h(r,["width:0",`transition:width ${n*c()}ms linear`])},M=()=>{h(r,["width:100%","transition:none"]),u()};return t.progress={pause:l,resume:u,reset:M}}mkMsg(t){var c;const n=`${t.content}${t.type}`;if(!this.type&&this.activeInsts.has(n)){const l=this.activeInsts.get(n);return l.count+=1,S(l.$el,l.count),l}const s={...t,onClosed:l=>{t!=null&&t.onClosed&&t.onClosed(l)},onClose:()=>{this.activeInsts.delete(n)}},i=this.core(s);if(this.type===1||this.activeInsts.size>=this.maxCount){const l=this.activeInsts.values().next().value;l&&((c=l.progress)==null||c.pause(),l.close(-2))}const r={...i,id:n,count:1};return this.activeInsts.set(n,r),i.open(),r}}function F(e){const t={content:"success",type:"success"};let n=!1;const s=i=>{switch(typeof i){case"string":n?t.type=i:(t.content=i,n=!0);break;case"number":t.timeout=i;break;case"object":Object.assign(t,i);break}};for(let i=0;i<4;i++){const r=e[i];r&&s(r)}return t}function y(e,t){const n=new D(e,t),s=(...i)=>n.fire(F(i));return s.config=n.config.bind(n),s}function w(e=""){return`<i class="${e}" style="cursor:pointer;transition:all 0.2s"><svg viewBox="0 0 24 24" width="1em" height="1em"><path d="M1.5,1.5l21,21" style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3px"/><path d="M1.5,22.5l21-21" style="fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:3px"/></svg></i>`}function k(e,t){const n=document.createElement("button");return n.textContent=e,n.onclick=t,n.classList.add(o("alert-btn")),n}function N(e){const t=a(o("alert")),n=C(e.type,!1,o("alert-icon"));if(t.innerHTML=`${n}<div class="${o("alert-title")}">${e.content}</div>`,e.text||e.html){const c=a(o("alert-content"));e.html?typeof e.html=="string"?c.innerHTML=e.html:c.append(e.html):c.textContent=e.text||"hello",t.append(c)}const s=g(),i=()=>{s.append(t)},r=c=>(e.onClose(),d(t,o("alert-out")),new Promise(l=>{p(t,u=>{u===o("alert-out")&&(t.remove(),e.onClosed(c),l())})}));if(e.showCancel||e.showConfirm){const c=a(o("alert-btn-group"));e.showCancel&&c.append(k("取消",()=>{r(0)})),e.showConfirm&&c.append(k("确定",()=>{r(1)})),t.append(c)}if(!e.hideClose){const c=a();c.innerHTML=w(o("alert-close")),c.onclick=()=>{r(0)},t.append(c)}return{close:r,open:i,$el:t}}const X=y(N,1);function R(e){const t=P(e.type,o("icon")),n=a(o("msg")),s=a(o("msg-main"));return n.append(s),s.innerHTML=`${t}<div class=${o("msg-content")}>${e.content}</div>`,{open:()=>{B().append(n),d(n,o("alert-in"))},close:c=>(e.onClose(),s.style.maxHeight=`${s.offsetHeight}px`,d(n,o("msg-out")),d(s,o("msg-close")),new Promise(l=>{p(n,u=>{u===o("msg-out")&&(n.remove(),e.onClosed(c),l())})})),$el:n}}const Y=y(R,0);function J(e){const t=C(e.type,!0,o("notice-icon")),n=a(o("notice"));return n.innerHTML=`<div class="${o("notice-main")}">${t}  <div class="${o("notice-content")}">${e.content}</div></div>`,{open:()=>{G().prepend(n),h(n,[`--mh:${n.offsetHeight+10}px`]),d(n,o("open")),setTimeout(()=>{const r=n.querySelector(`.${o("notice-icon")}`);r&&(r.style.opacity="1")},300)},close:r=>(e.onClose(),d(n,o("close")),new Promise(c=>{p(n,l=>{l===o("close")&&(n.remove(),e.onClosed(r),c())})})),$el:n}}const ee=y(J,0);function K(e){const t={info:"#409eff",success:"#67c23a",warn:"#e6a23c",error:"#f56c6c",loading:"#1890ff"},n=t[e.type]||t.info,s=a(o("info"));s.innerHTML=`<div class="${o("info-header")}"><div class="${o("info-status")}" style="background:${n};"></div><span style="margin-right:auto;font-weight:600">${e.headerLeft||"公告"}</span><span style="font-size:.875em;opacity:.7">${e.headerRight||""}</span>${e.hideClose?"":w(o("info-close"))}</div><div class="${o("info-content")}">${e.content}</div>`;const i=()=>{g().append(s)},r=c=>(e.onClose(),new Promise(l=>{d(s,o("info-out")),p(s,u=>{u===o("info-out")&&(s.remove(),e.onClosed(c),l())})}));if(!e.hideClose){const c=s.querySelector(`.${o("info-close")}`);c.onclick=()=>{r(0)}}return{open:i,close:r,$el:s}}const te=y(K,1),Q=L({__name:"GmBtn",props:{onClick:{type:Function,default:()=>{}}},setup(e){return(t,n)=>(H(),T("button",{class:"btn",onClick:n[0]||(n[0]=(...s)=>e.onClick&&e.onClick(...s))},[j(t.$slots,"default",{},void 0,!0)]))}}),ne=A(Q,[["__scopeId","data-v-a65e9128"]]);export{ne as G,X as a,te as i,Y as m,ee as n};
